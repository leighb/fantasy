<!DOCTYPE html>
<html>
	<head>
		<title>Bounce test</title>
	</head>
	<script type="text/javascript">
	window.onload = function()
	{
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');

		var ball = new ball();

		var counter = 0;
		var duration = 200;

		function draw() {
			ctx.fillStyle = "black";
			ctx.fillRect(0,0,canvas.width, canvas.height);

			ctx.fillStyle = "white";
			ctx.fillRect(ball.x - ball.w/2,ball.y - ball.h/2,ball.w,ball.h);


			ball.y = Math.easeOutBounce(counter,100,400,duration);
			console.log(ball.y);
			ball.x += ball.vx;
			if(counter < duration +4) {
				counter +=1;
			}
			if(duration>2) {
				duration -=1;
			}
			

		};

		function ball() {
			this.x = 100,
			this.y = 100,
			this.h = 10,
			this.w =10,
			this.vx = 2,
			this.vy = 1;
		};

		setInterval(draw, 33);

		// bounce easing in
		// t: current time, b: beginning value, c: change in position, d: duration
		Math.easeInBounce = function (t, b, c, d) {
			return c - Math.easeOutBounce (d-t, 0, c, d) + b;
		};

		// bounce easing out
		Math.easeOutBounce = function (t, b, c, d) {
			if ((t/=d) < (1/2.75)) {
				return c*(7.5625*t*t) + b;
			} else if (t < (2/2.75)) {
				return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
			} else if (t < (2.5/2.75)) {
				return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
			} else {
				return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
			}
		};

		// bounce easing in/out
		Math.easeInOutBounce = function (t, b, c, d) {
			if (t < d/2) return Math.easeInBounce (t*2, 0, c, d) * .5 + b;
			return Math.easeOutBounce (t*2-d, 0, c, d) * .5 + c*.5 + b;
		};



	}


	</script>
	<body>
		<canvas id="canvas" width="500" height="500"></canvas>
	</body>
</html>